<div class="container-fluid" style="margin-top: 1em;">
   

     <div class="well">
       <div class="row-fluid">
         <div class="span8">
           <h3>Tags de <%=@account.company%></h3>
         </div>
         </div>
       </div>
     </div>

         


<div class="container-fluid">
       <div class="row-fluid">
         <div class="span9">
	  <%
	       @tags = @account.tags.order('name')
	       @tags_paginated = @account.tags.order('name').page(params[:page])
	       @tags_select_tmp = Tag.order('name ASC').all
	       @tags_select = @tags_select_tmp.reject { |e| @tags.include? e }
	  %>
          <%= form_tag({:controller => "accounts", :action => "add_tag", :account_id => @account.id}, :method => "post") do %>
            <%= select_tag :tag_id, options_from_collection_for_select(@tags_select, "id", "name") %>
						<% if (@tags_select.count > 0) %>
              <%= submit_tag("Affecter") %>
						<% else %>
						  <%= label_tag(:tag_id, "Aucun tag disponible à l'ajout", { :class => 'badge badge-warning', :style => 'vertical-align: top; margin-left: 5px; margin-top: 6px;' }) %>		 
					  <% end %>
          <% end %>
          </div>
		</div>
          
	<% if @account.tags.blank? %>
		<h4> Aucun Tag n'est rattaché à ce compte...</h4>
	<% else %>
        


<table class="table table-bordered table-striped">
  <thead>
  <tr>
    <th class="text-center">Nom</th>
    <th class="text-center">Description</th>
    <th class="text-center">Supprimer</th>
  </tr>
  </thead>
  <tbody>


<% @tags_paginated.each do |tag| %>
  <tr>
    <td style="width: 15em;" class="text-center"><%= tag.name %></td>
    <td><%= truncate(tag.description, :length => 500, :separator => ' ') %></td>
    <td class="text-center"><%= link_to image_tag("glyphicons/glyphicons_016_bin.png"), {:controller => "accounts", :action => "delete_tag", :account_id => @account.id, :tag_id => tag.id } , :class =>"btn" %></td>
	<% end %>
  </tbody>
</table>

  <br />
  
  <%= paginate @tags_paginated %>
  
  
<% end %>
</div>

<div class="container-fluid" style="margin-top: 1em;">
  
     <div class="well">
       <div class="row-fluid">
         <div class="span9">
           <h1>Édition du compte Utilisateur</h1></div>
		     <%= link_to image_tag("glyphicons/glyphicons_210_left_arrow.png"), :back ,{:title => "Retour", :class =>"pull-right btn"} %>
		</div>
	 </div>
  
  <%= form_for(@user, :url => user_path(@user), :html => { :method => :put , :class => "well"}) do |f| %>
    <%= devise_error_messages! %>
  
    <div class="field"> <div class="span1">Login : </div> <%= f.email_field :email , :disabled => @email_disabled, :style=>'width: 20em;' %>
      <a id="profil_mdp" class="btn btn-success btn-small" data-toggle="modal" href="#edit_profile_modal" style="margin-bottom: 8px;">Modifier mon mot de passe</a>
    </div>
    
    <div class="field"> <div class="span1">Prénom : </div>
      <%= f.text_field :forename, { :class => 'required', :style=>'width: 20em;' } %>
    </div>

    <div class="field"><div class="span1"> Nom : </div>
      <%= f.text_field :surname, { :class => 'required', :style=>'width: 20em;' } %>
    </div>
       
    <div class="field"><div class="span1"> Tél fixe : </div>
      <%= f.text_field :tel, { :style=>'width: 20em;' } %>
    </div>
    
    <div class="field"> <div class="span1">Mobile : </div>
      <%= f.text_field :mobile, { :style=>'width: 20em;' } %>
    </div>
    <% if current_user.has_role?(:admin) %>
		 <div class="row row-fluid">
		      <div class="field full">
							 <label for="user[enabled]" class="checkbox">
										<input <%= (@user.enabled == true ? 'checked=checked' : '') %> type="checkbox" name="user[enabled]" id="user[enabled]" value="1" />Compte Activé
							 </label>
					</div>
		 </div>
     <% end %>
     <% if current_user.has_role?(:admin) or current_user.has_role?(:super_user) and !@user.has_role?(:super_user) %>
		 <div class="row row-fluid">
					<div class="field full">
							 <label for="user[super]" class="checkbox">
							   <input <%= (@user.has_role?(:super_user) ? 'checked=checked' : '') %> type="checkbox" name="user[super]" id="user[super]" value="1" />Droits "Super Utilisateur"
						   </label>
					</div>
		 </div>
     <% end %>
	
	
    
    
    <div class="modal hide fade" id="edit_profile_modal">
      
      <div class="modal-header">
        <button type="button" class="close" id="profil_cancel" data-dismiss="modal">×</button>
        <h3>Modification du mot de passe</h3>
      </div>
      
      <div class="modal-body">
        <div class="span3">
          Mot de passe actuel : (obligatoire)<br />
          <%= f.password_field :current_password, :id => "c_pwd" %>
        </div>
        
        <div class="span3">
          Nouveau mot de passe : <br />
          <%= f.password_field :password, {:id => "pwd", :autocomplete => "off"} %>
        </div>
        
        <div class="span3">
          Confirmer mot de passe : <br />
        <%= f.password_field :password_confirmation , :id => "pwd_confirm"%>
        </div>
      </div>
      
      <div class="modal-footer">
        <a href="#" id="profil_cancel" class="btn" data-dismiss="modal">Annuler </a>
        <a href="#" id="profil_submit" class="btn btn-primary" data-dismiss="modal">Valider</a>
      </div>
      
  </div>
  
  <div>
    <%= f.submit "Modifier", :class =>"btn btn-primary" , :style =>"margin-left: 122px;"%>
  </div>
  
  <% end %>

</div>

<div class="container-fluid">
  
  <div class="page-header">
    <h2>Édition du compte utilisateur</h2>
  </div>
  
  <%= form_for(@user, :url => user_path(@user), :html => { :method => :put , :class => "well"}) do |f| %>
    <%= devise_error_messages! %>
  
    <div class="field">Login : <br />
      <%= f.email_field :email , :disabled => @email_disabled %>
      <a id="profil_mdp" class="btn btn-success btn-small" data-toggle="modal" href="#edit_profile_modal" style="margin-bottom: 8px;">Modifier mon mot de passe</a>
    </div>
    
    <div class="field">Prénom : <br />
      <%= f.text_field :forename, { :class => 'required' } %>
    </div>

    <div class="field">Nom : <br />
      <%= f.text_field :surname, { :class => 'required' } %>
    </div>
       
    <div class="field">Tél fixe : <br />
      <%= f.text_field :tel %>
    </div>
    
    <div class="field">Tél mobile : <br />
      <%= f.text_field :mobile %>
    </div>
    <% if current_user.has_role? :super_user then %>
      <div class="field">
        <label for="user[enabled]" class="checkbox">
          Activé
          <input <%= (@user.enabled == true ? 'checked=checked' : '') %> type="checkbox" name="user[enabled]" id="user[enabled]" value="1" />
        </label>
      </div>
      <div class="field">
        <label for="user[super]" class="checkbox">
          Super Utilisateur
          <input <%= (@user.has_role?(:super_user) ? 'checked=checked' : '') %> type="checkbox" name="user[super]" id="user[super]" value="1" />
        </label>
      </div>
    <% end %>
    
    
    <div class="modal hide fade" id="edit_profile_modal">
      
      <div class="modal-header">
        <button type="button" class="close" id="profil_cancel" data-dismiss="modal">×</button>
        <h3>Modification du mot de passe</h3>
      </div>
      
      <div class="modal-body">
        <div class="span3">
          Mot de passe actuel : (obligatoire)<br />
          <%= f.password_field :current_password, :id => "c_pwd" %>
        </div>
        
        <div class="span3">
          Nouveau mot de passe : <br />
          <%= f.password_field :password, {:id => "pwd", :autocomplete => "off"} %>
        </div>
        
        <div class="span3">
          Confirmer mot de passe : <br />
        <%= f.password_field :password_confirmation , :id => "pwd_confirm"%>
        </div>
      </div>
      
      <div class="modal-footer">
        <a href="#" id="profil_cancel" class="btn" data-dismiss="modal">Annuler </a>
        <a href="#" id="profil_submit" class="btn btn-primary" data-dismiss="modal">Valider</a>
      </div>
      
  </div>
  
  <div class="field">
    <%= link_to image_tag("glyphicons/glyphicons_210_left_arrow.png"), :back ,{:title => "Retour"} %>
    <%= f.submit "Modifier", :class =>"btn btn-primary" , :style =>"margin-left: 122px;"%>
  </div>
  
  <% end %>

</div>

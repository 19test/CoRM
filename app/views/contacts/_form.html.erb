<%= form_for(@contact, :html => { :class => "well "}) do |f| %>
  <% if @contact.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@contact.errors.count, "error") %> prohibited this contact from being saved:</h2>

      <ul>
      <% @contact.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <div class="span2"> Nom : </div> <%= f.text_field :surname, :style=>'width: 30em;' %>
  </div>
  
  <div class="field">
    <div class="span2"> Prénom : </div> <%= f.text_field :forename , :style=>'width: 30em;'%>
  </div>
  
  <div class="field">
    <div class="span2"> Civilité : </div> <%= f.select :title, Contact::TITLES %>
  </div>
  
  <div class="field">
    <div class="span2"> Téléphone : </div> <%= f.text_field :tel, :style=>'width: 30em;' %>
  </div>
  
  <div class="field">
    <div class="span2"> Télécopie : </div> <%= f.text_field :fax, :style=>'width: 30em;' %>
  </div>
  
  <div class="field">
    <div class="span2"> Mobile : </div> <%= f.text_field :mobile, :style=>'width: 30em;' %>
  </div>
  
  <div class="field">
    <div class="span2"> E-mail : </div> <%= f.text_field :email, :style=>'width: 30em;' %>
  </div>
  
  <div class="field">
    <div class="span2"> Fonction : </div> <%= f.text_field :job, :style=>'width: 30em;' %>
  </div>
  
  <div class="field">
    <div class="span2"> Compte associé : </div> <%= f.collection_select :account_id, Account.order('company ASC').all, :id, :company, {:include_blank => true} %>
  </div>
  
  <div class="field">
    <div class="span2">Notes : </div> <%= f.text_area :notes , :rows => "5", :style=>'width: 30em;'%>
  </div>
  
  <div class="field">
    <div class="span2"> Tag(s) associé(s) : </div>
    <%= select_tag :display_contact_tag, options_from_collection_for_select(@contact.tags.order('name ASC').all, "id", "name"), {:size => 6, :multiple => true, :disabled => true} %>
    <a id="contact_add_button" class="btn btn-success btn-mini" data-toggle="modal" href="#contact_tag_modal" style="margin-bottom: 1em; margin-left: 2em;">Modifier Tag</a>
  </div>
  
  <div class="modal hide fade" id="contact_tag_modal" style="width: 900px; margin-left: -450px;">
    
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">×</button>
      <h3>Ajout de tags</h3>
    </div>
    
    <div class="modal-body">
      
      <div class="span3" style="margin-left: 50px;">
      <h4>Liste des tags :</h4>
      <% @tags = Tag.order('name ASC').all %>
      <%= select_tag :tag, options_from_collection_for_select(@tags, "id", "name"), {:size => 6, :multiple => true} %>
      </div>
      
      <div class="span2" style="padding-top: 3em; margin-left: 2em; margin-right: 2em;">
        
        <a id="contact_add_tag" class="btn btn-success btn-mini" href="#" style="margin-bottom: 1em; margin-left : 3em;">
          <i class="icon-arrow-right icon-white"></i>
          Ajouter
        </a>
        <br />
        <br />
        
        <a id="contact_remove_tag" class="btn btn-warning btn-mini" href="#" style="margin-bottom: 1em; margin-left : 3em;">
          <i class="icon-arrow-left icon-white"></i>
          Retirer
        </a>
      
      </div>
      
      <div class="span3">
        <h4>Tag(s) associé(s) au contact :</h4>
        <%= select_tag :contact_tag, options_from_collection_for_select(@contact.tags.order('name ASC').all, "id", "name"), {:size => 6, :multiple => true} %>
      </div>
      
    </div>
    
    <div class="modal-footer">
      <a href="#" id="contact_cancel_add" class="btn" data-dismiss="modal">Annuler </a>
      <a href="#" id="contact_submit_add" class="btn btn-primary" data-dismiss="modal">Valider</a>
    </div>
    
  </div>
  
  <br />
  	
	<div class="field">
    <% if !@contact.id.nil? %>
		<div class="span9"> Créé par : <%= @contact.author.full_name %>, le </strong><%= @contact.created_at.strftime("%d/%m/%y à %H:%M") %>. </div> <br />
		
		<% if !@contact.modified_by.nil? %>
			<div class="span9"> Dernièrement modifié par : <%= @contact.editor.full_name %>, le <%= @contact.updated_at.strftime("%d/%m/%y à %H:%M") %>. </div> <br />
		
		<% else %>
		<% end %>
		
	<% end %>
	</div>
	  
	<hr />
  
   <div class="row">
	  <%= if !@contact.id.nil? then f.submit 'Modifier ce Contact', :class =>"btn btn-primary",:id =>"contact_submit_form" else f.submit 'Créer un Contact', :class =>"btn btn-primary",:id =>"contact_submit_form" end %>
      <%= if !@contact.id.nil? then link_to image_tag("glyphicons/glyphicons_016_bin.png"), @contact, :title => "Supprimer le contact", :confirm => 'Confirmer la suppression ?', :class =>"pull-right btn", :method => :delete end %> 
  </div>
 
<% end %>
